(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{25:function(e,t,n){},28:function(e,t,n){},46:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(2),a=n.n(o),s=n(31),i=n.n(s),l=(n(46),n(8)),r=(n(25),n(17)),d=n.n(r),u=n(32),b=n(19);n(48),n(50);b.a.initializeApp({apiKey:"AIzaSyA080kJfAPwLpYxRMozXm1z2gYSUobiwnw",authDomain:"notesbanalo.firebaseapp.com",databaseURL:"https://notesbanalo.firebaseio.com",projectId:"notesbanalo",storageBucket:"notesbanalo.appspot.com",messagingSenderId:"592029749801",appId:"1:592029749801:web:187b77d0eabbec763d0238"});var j=b.a,h=b.a.auth(),m=b.a.firestore(),O=function(e){var t=e.setIsNewUser,n=function(){var e=Object(u.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new j.auth.GoogleAuthProvider,e.next=3,h.signInWithPopup(c).then((function(e){e.additionalUserInfo.isNewUser?t(!0):t(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{className:"form-container",children:Object(c.jsxs)("div",{className:"form",children:[Object(c.jsx)("h1",{children:"notebanalo"}),Object(c.jsx)("button",{onClick:n,children:"Login with Google"})]})})]})},p=n(39),x=n(69),f=n(33),v=n(34),g=n(13),w=n(40),N=n(38),k=n(22),y=n.n(k);n(28);function C(e){var t=e.target.parentNode.value||e.target.value,n=window.getSelection().getRangeAt(0).startContainer.parentNode.nodeName,c=window.getSelection().getRangeAt(0).startContainer.parentNode.style.backgroundColor;"H1"===n||"H2"===n||"H3"===n?t==n?document.execCommand("formatblock",!1,"div"):"H1"===t||"H2"===t||"H3"===t?document.execCommand("formatblock",!1,t):(document.execCommand("formatblock",!1,"div"),document.execCommand("removeFormat",!1),document.execCommand(t,!1)):"H1"!==t&&"H2"!==t&&"H3"!==t||"LI"===n?document.execCommand(t,!1):("B"!==n&&"I"!==n&&"STRIKE"!==n&&"U"!==n||document.execCommand("removeFormat",!1),document.execCommand("formatblock",!1,t)),"hiliteColor"===t&&(""!==c?document.execCommand("removeFormat",!1):document.execCommand("hiliteColor",!1,"#DAF7A6")),"formatBlock"===t&&document.execCommand(t,!1)}var D=function(e){var t=e.position.x+e.position.width/2-200,n={position:"absolute",top:e.position.y-30+window.scrollY,left:t};return Object(c.jsx)("div",{style:n,className:"menu-container",children:Object(c.jsxs)("div",{className:"menu",children:[Object(c.jsxs)("button",{onClick:C,value:"italic",children:[" ",Object(c.jsx)("i",{className:"fas fa-italic"})]}),Object(c.jsxs)("button",{onClick:C,value:"bold",children:[" ",Object(c.jsx)("i",{className:"fas fa-bold"})," "]}),Object(c.jsxs)("button",{onClick:C,value:"underline",children:[" ",Object(c.jsx)("i",{className:"fas fa-underline"})," "]}),Object(c.jsxs)("button",{onClick:C,value:"strikethrough",children:[" ",Object(c.jsx)("i",{className:"fas fa-strikethrough"})," "]}),Object(c.jsxs)("button",{onClick:C,value:"H1",children:[" ",Object(c.jsx)("b",{children:"H1"}),"  "]}),Object(c.jsxs)("button",{onClick:C,value:"H2",children:[" ",Object(c.jsx)("b",{children:"H2"}),"  "]}),Object(c.jsxs)("button",{onClick:C,value:"H3",children:[" ",Object(c.jsx)("b",{children:"H3"})]}),Object(c.jsxs)("button",{onClick:C,value:"insertOrderedList",children:[" ",Object(c.jsx)("i",{className:"fas fa-list-ol"})," "]}),Object(c.jsxs)("button",{onClick:C,value:"insertUnorderedList",children:[" ",Object(c.jsx)("i",{className:"fas fa-list-ul"})]}),Object(c.jsxs)("button",{onClick:C,value:"hiliteColor",children:[" ",Object(c.jsx)("i",{className:"fas fa-highlighter"})]})]})})};function S(e){var t=e.target.parentNode.value||e.target.value;"insertHorizontalRule"==t&&(document.execCommand(t,!1),document.execCommand("insertHtml",!1,"<br>")),"formatBlock"==t&&document.execCommand(t,!1)}var H=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){document.execCommand("insertHTML",!1,"<div contenteditable='true'><img src=".concat(n.result," /> </div>"))},n.readAsDataURL(t)},M=function(e){var t=e.position.x,n={position:"absolute",top:e.position.y+window.scrollY,left:t};return Object(c.jsx)("div",{style:n,className:"menu-container",children:Object(c.jsxs)("div",{className:"menu",children:[Object(c.jsx)("label",{for:"file-upload",className:"custom-file-upload",children:Object(c.jsx)("i",{className:"fas fa-upload"})}),Object(c.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:H,className:"image-upload"}),Object(c.jsx)("button",{onClick:S,value:"insertHorizontalRule",children:" divider "})]})})},P=n(35),A=function(){var e,t,n,c=window.getSelection();if(0!==c.rangeCount){var o=c.getRangeAt(0).cloneRange();o.collapse(!1);var a=o.getBoundingClientRect();a&&(e=a.left,t=a.top,n=a.width)}return{x:e,y:t,width:n}},U=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(e){var o;return Object(f.a)(this,n),(o=t.call(this,e)).onPaste=function(e){e.clipboardData.getData("text");Object(P.extract)("https://www.youtube.com/watch?v=8jPQjjsBbIc").then((function(e){console.log(e)})).catch((function(e){console.trace(e)}))},o.onKeyDownHandler=function(e){if("."==e.key&&"."==o.state.prevkey){e.preventDefault();var t=A(),n=t.x,c=t.y,a=t.width;o.setState({isSlashMenuOpen:!0,menuPosition:{x:n,y:c,width:a},prevkey:null})}else"."==e.key?o.setState({prevkey:"."}):o.setState({isSlashMenuOpen:!1,prevkey:null})},o.mouseUp=function(){var e=document.getSelection();if("None"!=e.type){var t=A(),n=t.x,c=t.y,a=t.width;"Caret"!=e.type&&o.setState({isMenuOpen:!0,menuPosition:{x:n,y:c,width:a},isSlashMenuOpen:!1})}},o.render=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"App default",onMouseUp:o.mouseUp,onKeyDown:o.onKeyDownHandler,children:Object(c.jsxs)("div",{className:"sheet",children:[o.state.isMenuOpen&&Object(c.jsx)(D,{position:o.state.menuPosition}),o.state.isSlashMenuOpen&&Object(c.jsx)(M,{position:o.state.menuPosition}),Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:Object(c.jsx)("p",{className:"editable doc-title",children:o.state.currentDoc.name})})}),Object(c.jsx)(y.a,{className:"editable",html:o.state.html,disabled:!1,onChange:o.onChangeHandler,onMouseDown:o.onMouseDownHandler,onPaste:o.onPaste,onBlur:o.SaveDoc,spellCheck:"false"}),Object(c.jsx)("button",{onClick:o.SaveDoc,className:"save-btn",children:"save doc"})]})})})},o.state={currentDoc:o.props.currentDoc,html:o.props.html,isMenuOpen:!1,isSlashMenuOpen:!1,menuPosition:{x:null,y:null,width:null},prevkey:null},o.onMouseDownHandler=o.onMouseDownHandler.bind(Object(g.a)(o)),o.onChangeHandler=o.onChangeHandler.bind(Object(g.a)(o)),o.mouseUp=o.mouseUp.bind(Object(g.a)(o)),o.onKeyDownHandler=o.onKeyDownHandler.bind(Object(g.a)(o)),o.SaveDoc=o.SaveDoc.bind(Object(g.a)(o)),o.onPaste=o.onPaste.bind(Object(g.a)(o)),o}return Object(v.a)(n,[{key:"componentDidUpdate",value:function(){this.props.currentDoc.id!=this.state.currentDoc.id&&this.setState({currentDoc:this.props.currentDoc,html:this.props.html})}},{key:"SaveDoc",value:function(){null!=this.state.html&&m.collection("notes").doc(this.props.currentDoc.id).update({doc:this.state.html}).then((function(){console.log("succesfully added")}))}},{key:"onMouseDownHandler",value:function(e){document.getSelection().removeAllRanges(),this.state.isMenuOpen&&this.setState({isMenuOpen:!1,isSlashMenuOpen:!1}),this.state.isSlashMenuOpen&&this.setState({isMenuOpen:!1,isSlashMenuOpen:!1})}},{key:"onChangeHandler",value:function(e){this.setState({html:e.target.value,isMenuOpen:!1})}}]),n}(a.a.Component),I=function(e){var t=e.createNewDoc,n=e.closePopup;return Object(c.jsxs)("div",{className:"new-doc-popup",children:[Object(c.jsx)("button",{onClick:n,className:"close-btn",children:Object(c.jsx)("i",{class:"fas fa-times"})}),Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("p",{children:" Enter the name of the document"}),Object(c.jsx)("input",{type:"text",name:"docName",autocomplete:"off"}),Object(c.jsx)("input",{type:"submit"})]})]})},F=function(e){var t=e.currentDoc,n="".concat(window.location.href,"notes/").concat(t.id);return Object(c.jsx)("div",{className:"share-menu-container",children:Object(c.jsxs)("div",{className:"share-menu",children:[Object(c.jsx)("p",{children:"copy the link below to share"}),Object(c.jsx)("input",{type:"text",value:n,readonly:!0})]})})},R=function(e){var t=e.docs,n=e.selectNote,o=e.deleteNote,a=e.newDoc;return Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)("button",{onClick:a,className:"new-doc-btn",children:"new doc"}),Object(c.jsx)("div",{children:t.map((function(e,t){return Object(c.jsxs)("div",{className:"sidebar-btn-container",children:[Object(c.jsx)("button",{className:"sidebar-btn",onClick:n,id:t,children:e.name}),Object(c.jsx)("button",{className:"delete-btn",onClick:o,id:t,children:Object(c.jsx)("i",{className:"fas fa-trash-alt"})})]},t)}))})]})},L=function(e){var t=e.userObj,n=e.isNewUser,a=[{id:"",name:"",doc:""}],s=function(){S(!0)};Object(o.useEffect)((function(){if(n){var e=Object(x.a)(),c={user:t.user.uid,id:e,createdAt:Date.now(),name:"Your First Document",doc:'<h1>Welcome to Notes<b>Banalo</b></h1><div>You can <b style="background-color: rgb(218, 247, 166);">create </b>and <b style="background-color: rgb(218, 247, 166);">share </b>documents. You can style your text, <b>make it bold</b>, <i>italics </i>or <strike style="">strikethrough</strike>.</div><div><span style="background-color: rgb(218, 247, 166);">you can highlight your text.</span></div><div><br></div><h3>and you can add images! [press the period (.) key twice]</h3><div><img src="https://i.giphy.com/media/xT0xeJpnrWC4XWblEk/giphy.webp"><br></div>'};m.collection("notes").doc(e).set(c)}i()}),[]);var i=function(){t&&m.collection("notes").where("user","==",t.user.uid).get().then((function(e){var t=e.docs.map((function(e){return e.data()}));b(Object(p.a)(t))}))},r=Object(o.useState)(a),d=Object(l.a)(r,2),u=d[0],b=d[1],j=Object(o.useState)('<div class="editable" spellcheck="false" contenteditable="false">create or select a document to show its content</div>'),O=Object(l.a)(j,2),f=O[0],v=O[1],g=Object(o.useState)(u[0]),w=Object(l.a)(g,2),N=w[0],k=w[1],y=Object(o.useState)(!1),C=Object(l.a)(y,2),D=C[0],S=C[1],H=Object(o.useState)(!1),M=Object(l.a)(H,2),P=M[0],A=M[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{children:[Object(c.jsxs)("p",{className:"logo",children:[Object(c.jsx)("b",{children:"notes"}),"banalo"]}),Object(c.jsx)("button",{onClick:function(){h.signOut()},className:"sign-out-btn",children:"sign out"}),N.id&&Object(c.jsx)("button",{onClick:function(e){A(!P)},className:"sign-out-btn",children:"Share"})]}),D&&Object(c.jsx)(I,{createNewDoc:function(e){S(!1),e.preventDefault(),console.log(e.target.docName.value);var n=e.target.docName.value||"untitled",c=Object(x.a)(),o={user:t.user.uid,id:c,createdAt:Date.now(),name:n,doc:"<div>You can highlight this text to apply styles. type the period (.) key twice for more option</div>"};m.collection("notes").doc(c).set(o),i()},closePopup:function(){S(!1)}}),P&&Object(c.jsx)(F,{currentDoc:N}),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)("button",{onClick:s,className:"new-doc-btn",children:"new doc"}),Object(c.jsx)(R,{docs:u,selectNote:function(e){var t=e.target.id;v(u[t].doc),k(u[t]),i()},deleteNote:function(e){var t=e.target.parentNode.id||e.target.id;m.collection("notes").doc(u[t].id).delete().then((function(){console.log("Document successfully deleted!"),i()}));k(a),v('<div class="editable" spellcheck="false" contenteditable="false">Document Deleted</div>')},newDoc:s})]}),Object(c.jsx)(U,{userObj:t,html:f,currentDoc:N})]})},B=function(e){var t=e.match,n=Object(o.useState)({id:"test"}),a=Object(l.a)(n,2),s=a[0],i=a[1];return Object(o.useEffect)((function(){m.collection("notes").doc(t.params.id).get().then((function(e){e.exists?(i(e.data()),document.title=e.data().name):i("")}))}),[]),Object(c.jsx)("div",{className:"App default",children:s.id?Object(c.jsxs)("div",{className:"sheet-read-only",children:[Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:Object(c.jsx)("p",{className:"editable doc-title",children:s.name})})}),Object(c.jsx)(y.a,{className:"editable",html:s.doc,disabled:!0,spellCheck:"false"})]}):Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:Object(c.jsx)("p",{className:"editable doc-title",children:"Document Not Found"})})})})},Y=n(36),E=n(5),K=function(e){var t=e.isLoggedIn,n=e.userObj,a=Object(o.useState)(!1),s=Object(l.a)(a,2),i=s[0],r=s[1];return Object(c.jsx)(Y.a,{children:Object(c.jsxs)(E.c,{children:[Object(c.jsx)(E.a,{path:"/notes/:id",component:B}),t?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(E.a,{exact:!0,path:"/",children:Object(c.jsx)(L,{userObj:n,isNewUser:i})})}):Object(c.jsx)(E.a,{exact:!0,path:"/",children:Object(c.jsx)(O,{setIsNewUser:r})})]})})},z=function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(o.useState)(!1),i=Object(l.a)(s,2),r=i[0],d=i[1],u=Object(o.useState)(null),b=Object(l.a)(u,2),j=b[0],m=b[1];return Object(o.useEffect)((function(){h.onAuthStateChanged((function(e){e?(m({user:e}),a(!0)):a(!1),d(!0)}))}),[]),Object(c.jsx)(c.Fragment,{children:r?Object(c.jsx)(K,{isLoggedIn:n,userObj:j}):""})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),o(e),a(e),s(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(z,{})}),document.getElementById("root")),T()}},[[67,1,2]]]);
//# sourceMappingURL=main.cda1e67e.chunk.js.map