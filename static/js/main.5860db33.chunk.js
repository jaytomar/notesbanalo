(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{25:function(e,t,n){},28:function(e,t,n){},46:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(2),o=n.n(a),s=n(31),i=n.n(s),l=(n(46),n(10)),r=(n(25),n(17)),d=n.n(r),u=n(32),j=n(19);n(48),n(50);j.a.initializeApp({apiKey:"AIzaSyA080kJfAPwLpYxRMozXm1z2gYSUobiwnw",authDomain:"notesbanalo.firebaseapp.com",databaseURL:"https://notesbanalo.firebaseio.com",projectId:"notesbanalo",storageBucket:"notesbanalo.appspot.com",messagingSenderId:"592029749801",appId:"1:592029749801:web:187b77d0eabbec763d0238"});var b=j.a,h=j.a.auth(),m=j.a.firestore(),O=function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new b.auth.GoogleAuthProvider,e.next=3,h.signInWithPopup(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{className:"form-container",children:Object(c.jsxs)("div",{className:"form",children:[Object(c.jsx)("h1",{children:"notebanalo"}),Object(c.jsx)("button",{onClick:e,children:"Login with Google"})]})})]})},p=n(39),x=n(69),f=n(33),v=n(34),g=n(13),w=n(40),N=n(38),C=n(22),k=n.n(C);n(28);function y(e){var t=e.target.parentNode.value||e.target.value,n=window.getSelection().getRangeAt(0).startContainer.parentNode.nodeName,c=window.getSelection().getRangeAt(0).startContainer.parentNode.style.backgroundColor;"H1"===n||"H2"===n||"H3"===n?t==n?document.execCommand("formatblock",!1,"div"):"H1"===t||"H2"===t||"H3"===t?document.execCommand("formatblock",!1,t):(document.execCommand("formatblock",!1,"div"),document.execCommand("removeFormat",!1),document.execCommand(t,!1)):"H1"!==t&&"H2"!==t&&"H3"!==t||"LI"===n?document.execCommand(t,!1):("B"!==n&&"I"!==n&&"STRIKE"!==n&&"U"!==n||document.execCommand("removeFormat",!1),document.execCommand("formatblock",!1,t)),"hiliteColor"===t&&(""!==c?document.execCommand("removeFormat",!1):document.execCommand("hiliteColor",!1,"#DAF7A6")),"formatBlock"===t&&document.execCommand(t,!1)}var D=function(e){var t=e.position.x+e.position.width/2-200,n={position:"absolute",top:e.position.y-30+window.scrollY,left:t};return Object(c.jsx)("div",{style:n,className:"menu-container",children:Object(c.jsxs)("div",{className:"menu",children:[Object(c.jsxs)("button",{onClick:y,value:"italic",children:[" ",Object(c.jsx)("i",{className:"fas fa-italic"})]}),Object(c.jsxs)("button",{onClick:y,value:"bold",children:[" ",Object(c.jsx)("i",{className:"fas fa-bold"})," "]}),Object(c.jsxs)("button",{onClick:y,value:"underline",children:[" ",Object(c.jsx)("i",{className:"fas fa-underline"})," "]}),Object(c.jsxs)("button",{onClick:y,value:"strikethrough",children:[" ",Object(c.jsx)("i",{className:"fas fa-strikethrough"})," "]}),Object(c.jsxs)("button",{onClick:y,value:"H1",children:[" ",Object(c.jsx)("b",{children:"H1"}),"  "]}),Object(c.jsxs)("button",{onClick:y,value:"H2",children:[" ",Object(c.jsx)("b",{children:"H2"}),"  "]}),Object(c.jsxs)("button",{onClick:y,value:"H3",children:[" ",Object(c.jsx)("b",{children:"H3"})]}),Object(c.jsxs)("button",{onClick:y,value:"insertOrderedList",children:[" ",Object(c.jsx)("i",{className:"fas fa-list-ol"})," "]}),Object(c.jsxs)("button",{onClick:y,value:"insertUnorderedList",children:[" ",Object(c.jsx)("i",{className:"fas fa-list-ul"})]}),Object(c.jsxs)("button",{onClick:y,value:"hiliteColor",children:[" ",Object(c.jsx)("i",{className:"fas fa-highlighter"})]})]})})};function S(e){var t=e.target.parentNode.value||e.target.value;"insertHorizontalRule"==t&&(document.execCommand(t,!1),document.execCommand("insertHtml",!1,"<br>")),"formatBlock"==t&&document.execCommand(t,!1)}var H=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){document.execCommand("insertHTML",!1,"<div contenteditable='true'><img src=".concat(n.result," /> </div>"))},n.readAsDataURL(t)},M=function(e){var t=e.position.x,n={position:"absolute",top:e.position.y+window.scrollY,left:t};return Object(c.jsx)("div",{style:n,className:"menu-container",children:Object(c.jsxs)("div",{className:"menu",children:[Object(c.jsx)("label",{for:"file-upload",className:"custom-file-upload",children:Object(c.jsx)("i",{className:"fas fa-upload"})}),Object(c.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:H,className:"image-upload"}),Object(c.jsx)("button",{onClick:S,value:"insertHorizontalRule",children:" divider "})]})})},A=n(35),P=function(){var e,t,n,c=window.getSelection();if(0!==c.rangeCount){var a=c.getRangeAt(0).cloneRange();a.collapse(!1);var o=a.getBoundingClientRect();o&&(e=o.left,t=o.top,n=o.width)}return{x:e,y:t,width:n}},I=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onPaste=function(e){e.clipboardData.getData("text");Object(A.extract)("https://www.youtube.com/watch?v=8jPQjjsBbIc").then((function(e){console.log(e)})).catch((function(e){console.trace(e)}))},a.onKeyDownHandler=function(e){if("."==e.key&&"."==a.state.prevkey){e.preventDefault();var t=P(),n=t.x,c=t.y,o=t.width;a.setState({isSlashMenuOpen:!0,menuPosition:{x:n,y:c,width:o},prevkey:null})}else"."==e.key?a.setState({prevkey:"."}):a.setState({isSlashMenuOpen:!1,prevkey:null})},a.mouseUp=function(){var e=document.getSelection();if("None"!=e.type){var t=P(),n=t.x,c=t.y,o=t.width;"Caret"!=e.type&&a.setState({isMenuOpen:!0,menuPosition:{x:n,y:c,width:o},isSlashMenuOpen:!1})}},a.render=function(){a.state.currentDoc.createdAt;return Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"App default",onMouseUp:a.mouseUp,onKeyDown:a.onKeyDownHandler,children:Object(c.jsxs)("div",{className:"sheet",children:[a.state.isMenuOpen&&Object(c.jsx)(D,{position:a.state.menuPosition}),a.state.isSlashMenuOpen&&Object(c.jsx)(M,{position:a.state.menuPosition}),Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:Object(c.jsx)("p",{className:"editable doc-title",children:a.state.currentDoc.name})})}),Object(c.jsx)(k.a,{className:"editable",html:a.state.html,disabled:!1,onChange:a.onChangeHandler,onMouseDown:a.onMouseDownHandler,onPaste:a.onPaste,spellCheck:"false"}),Object(c.jsx)("button",{onClick:a.SaveDoc,className:"save-btn",children:"save doc"})]})})})},a.state={currentDoc:a.props.currentDoc,html:a.props.html,isMenuOpen:!1,isSlashMenuOpen:!1,menuPosition:{x:null,y:null,width:null},prevkey:null},a.onMouseDownHandler=a.onMouseDownHandler.bind(Object(g.a)(a)),a.onChangeHandler=a.onChangeHandler.bind(Object(g.a)(a)),a.mouseUp=a.mouseUp.bind(Object(g.a)(a)),a.onKeyDownHandler=a.onKeyDownHandler.bind(Object(g.a)(a)),a.SaveDoc=a.SaveDoc.bind(Object(g.a)(a)),a.onPaste=a.onPaste.bind(Object(g.a)(a)),a}return Object(v.a)(n,[{key:"componentDidUpdate",value:function(){this.props.currentDoc.id!=this.state.currentDoc.id&&this.setState({currentDoc:this.props.currentDoc,html:this.props.html})}},{key:"SaveDoc",value:function(){m.collection("notes").doc(this.props.currentDoc.id).update({doc:this.state.html}).then((function(){console.log("succesfully added")}))}},{key:"onMouseDownHandler",value:function(e){document.getSelection().removeAllRanges(),this.state.isMenuOpen&&this.setState({isMenuOpen:!1,isSlashMenuOpen:!1}),this.state.isSlashMenuOpen&&this.setState({isMenuOpen:!1,isSlashMenuOpen:!1})}},{key:"onChangeHandler",value:function(e){this.setState({html:e.target.value,isMenuOpen:!1})}}]),n}(o.a.Component),R=function(e){var t=e.createNewDoc;return Object(c.jsx)("div",{className:"new-doc-popup",children:Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("p",{children:"enter the name of the document"}),Object(c.jsx)("input",{type:"text",name:"docName",autocomplete:"off"}),Object(c.jsx)("input",{type:"submit"})]})})},F=function(e){var t=e.currentDoc,n="".concat(window.location.href,"notes/").concat(t.id);return Object(c.jsx)("div",{className:"share-menu-container",children:Object(c.jsxs)("div",{className:"share-menu",children:[Object(c.jsx)("p",{children:"copy the link below to share"}),Object(c.jsx)("input",{type:"text",value:n,readonly:!0})]})})},L=function(e){var t=e.docs,n=e.selectNote,a=e.deleteNote,o=e.newDoc;return Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)("button",{onClick:o,className:"new-doc-btn",children:"new doc"}),Object(c.jsx)("div",{children:t.map((function(e,t){return Object(c.jsxs)("div",{className:"sidebar-btn-container",children:[Object(c.jsx)("button",{className:"sidebar-btn",onClick:n,id:t,children:e.name}),Object(c.jsx)("button",{className:"delete-btn",onClick:a,id:t,children:Object(c.jsx)("i",{className:"fas fa-trash-alt"})})]},t)}))})]})},U=function(e){var t=e.userObj,n=[{id:"",name:"",doc:""}],o=function(){D(!0)};Object(a.useEffect)((function(){s()}),[]);var s=function(){t&&m.collection("notes").where("user","==",t.user.uid).get().then((function(e){var t=e.docs.map((function(e){return e.data()}));u(Object(p.a)(t))}))},i=Object(a.useState)(n),r=Object(l.a)(i,2),d=r[0],u=r[1],j=Object(a.useState)('<div class="editable" spellcheck="false" contenteditable="false">create or select a document to show its content</div>'),b=Object(l.a)(j,2),O=b[0],f=b[1],v=Object(a.useState)(d[0]),g=Object(l.a)(v,2),w=g[0],N=g[1],C=Object(a.useState)(!1),k=Object(l.a)(C,2),y=k[0],D=k[1],S=Object(a.useState)(!1),H=Object(l.a)(S,2),M=H[0],A=H[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{children:[Object(c.jsx)("p",{className:"logo",children:"notebanalo"}),Object(c.jsx)("button",{onClick:function(){h.signOut()},className:"sign-out-btn",children:"sign out"}),w.id&&Object(c.jsx)("button",{onClick:function(e){A(!M)},className:"sign-out-btn",children:"Share"})]}),y&&Object(c.jsx)(R,{createNewDoc:function(e){D(!1),e.preventDefault(),console.log(e.target.docName.value);var n=e.target.docName.value||"untitled",c=Object(x.a)(),a={user:t.user.uid,id:c,createdAt:Date.now(),name:n,doc:"<div>You can highlight this text to apply styles. type the period (.) key twice for more option</div>"};m.collection("notes").doc(c).set(a),s()}}),M&&Object(c.jsx)(F,{currentDoc:w}),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)("button",{onClick:o,className:"new-doc-btn",children:"new doc"}),Object(c.jsx)(L,{docs:d,selectNote:function(e){var t=e.target.id;f(d[t].doc),N(d[t]),s()},deleteNote:function(e){var t=e.target.parentNode.id||e.target.id;m.collection("notes").doc(d[t].id).delete().then((function(){console.log("Document successfully deleted!"),s()}));N(n),f('<div class="editable" spellcheck="false" contenteditable="false">Document Deleted</div>')},newDoc:o})]}),Object(c.jsx)(I,{userObj:t,html:O,currentDoc:w})]})},B=function(e){var t=e.match,n=Object(a.useState)({id:"test"}),o=Object(l.a)(n,2),s=o[0],i=o[1];return Object(a.useEffect)((function(){m.collection("notes").doc(t.params.id).get().then((function(e){e.exists?i(e.data()):i("")}))}),[]),Object(c.jsx)("div",{className:"App default",children:s.id?Object(c.jsxs)("div",{className:"sheet-read-only",children:[Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:Object(c.jsx)("p",{className:"editable doc-title",children:s.name})})}),Object(c.jsx)(k.a,{className:"editable",html:s.doc,disabled:!0,spellCheck:"false"})]}):Object(c.jsx)("div",{children:Object(c.jsx)("b",{children:Object(c.jsx)("p",{className:"editable doc-title",children:"Document Not Found"})})})})},K=n(36),z=n(5),E=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(c.jsx)(K.a,{children:Object(c.jsxs)(z.c,{children:[Object(c.jsx)(z.a,{path:"/notes/:id",component:B}),t?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(z.a,{exact:!0,path:"/",children:Object(c.jsx)(U,{userObj:n})})}):Object(c.jsx)(z.a,{exact:!0,path:"/",children:Object(c.jsx)(O,{})})]})})},Y=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),r=i[0],d=i[1],u=Object(a.useState)(null),j=Object(l.a)(u,2),b=j[0],m=j[1];return Object(a.useEffect)((function(){h.onAuthStateChanged((function(e){e?(m({user:e}),o(!0)):o(!1),d(!0)}))}),[]),Object(c.jsx)(c.Fragment,{children:r?Object(c.jsx)(E,{isLoggedIn:n,userObj:b}):""})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(Y,{})}),document.getElementById("root")),T()}},[[67,1,2]]]);
//# sourceMappingURL=main.5860db33.chunk.js.map